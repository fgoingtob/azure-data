#1st
reg add hkey_local_machine\software\policies\microsoft\fve /v FDVRequireActiveDirectoryBackup /t REG_DWORD /d 0 /f
#2nd
reg add hkey_local_machine\software\policies\microsoft\fve /v OSHideRecoveryPage /t REG_DWORD /d 1 /f
#3rd
reg add hkey_local_machine\software\policies\microsoft\fve /v osmanagedra /t REG_DWORD /d 0 /f
#4th
reg add hkey_local_machine\software\policies\microsoft\fve /v fdvhiderecoverypage /t REG_DWORD /d 1 /f
#5th
reg add hkey_local_machine\software\policies\microsoft\fve /v osrecoverykey /t REG_DWORD /d 0 /f
#6th
reg add hkey_local_machine\software\policies\microsoft\fve /v enablebdewithnotpm /t REG_DWORD /d 0 /f

_____________________________________________________________


#first
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvhardwareencryption /t REG_DWORD /d 0 /f
#second
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvrecoverykey /t REG_DWORD /d 0 /f
#third
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvrequireactivedirectorybackup /t REG_DWORD /d 0 /f
#fourth
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvactivedirectoryinfotostore /t REG_DWORD /d 1 /f
#fifth
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvhiderecoverypage /t REG_DWORD /d 1 /f
#sixth
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvmanagedra /t REG_DWORD /d 1 /f
#7th
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvmanagedra /t REG_DWORD /d 1 /f
#8th
reg add hkey_local_machine\software\policies\microsoft\fve /v osrecoverypassword /t REG_DWORD /d 1 /f
#9th
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvrecoverypassword /t REG_DWORD /d 0 /f
#10th
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvdiscoveryvolumetype /t REG_DWORD /d 0 /f
#11th
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvrecovery /t REG_DWORD /d 1 /f
#12th
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvenforceusercert /t REG_DWORD /d 1 /f
#13th
reg add hkey_local_machine\software\policies\microsoft\fve /v rdvpassphrase /t REG_DWORD /d 0 /f




_____________



reg add HKLM\SOFTWARE\Policies\Microsoft\FVE /v FDVRequireActiveDirectoryBackup /t REG_DWORD /d 0 /f
reg add HKLM\SOFTWARE\Policies\Microsoft\FVE /v OSHideRecoveryPage /t REG_DWORD /d 1 /f
reg add HKLM\SOFTWARE\Policies\Microsoft\FVE /v OSManageDRA /t REG_DWORD /d 0 /f
reg add HKLM\SOFTWARE\Policies\Microsoft\FVE /v FDVHideRecoveryPage /t REG_DWORD /d 1 /f
reg add HKLM\SOFTWARE\Policies\Microsoft\FVE /v OSRecoveryKey /t REG_DWORD /d 0 /f
reg add HKLM\SOFTWARE\Policies\Microsoft\FVE /v EnableBDEWithNoTPM /t REG_DWORD /d 0 /f

XXXXXXXXXXXXXXXXXXXXXXXXX


# Ensure script runs in 64-bit PowerShell when deployed from Intune
if ($env:PROCESSOR_ARCHITEW6432 -eq "AMD64") {
    Write-Output "Restarting script in 64-bit PowerShell..."
    Start-Process "$env:WINDIR\SysNative\WindowsPowerShell\v1.0\powershell.exe" `
        -ArgumentList "-ExecutionPolicy Bypass -File `"$PSCommandPath`"" `
        -Wait
    Exit
}

$RegistryPath = "HKLM:\SOFTWARE\Policies\Microsoft\FVE"

# Create FVE key if it does not exist
if (!(Test-Path $RegistryPath)) {
    New-Item -Path $RegistryPath -Force | Out-Null
}

# Define registry values
$BitLockerSettings = @{
    "FDVRequireActiveDirectoryBackup" = 0
    "OSHideRecoveryPage"              = 1
    "OSManageDRA"                     = 0
    "FDVHideRecoveryPage"             = 1
    "OSRecoveryKey"                   = 0
    "EnableBDEWithNoTPM"              = 0
}

# Apply each setting
foreach ($Setting in $BitLockerSettings.GetEnumerator()) {
    New-ItemProperty `
        -Path $RegistryPath `
        -Name $Setting.Key `
        -Value $Setting.Value `
        -PropertyType DWord `
        -Force | Out-Null
}

Write-Output "All BitLocker registry policies have been successfully configured."



YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY


